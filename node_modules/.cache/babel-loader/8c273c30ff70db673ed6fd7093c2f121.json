{"ast":null,"code":"var _jsxFileName = \"/Users/maxmohammadi/Lottery-Solidity/my-app/src/App.js\";\nimport React, { Component } from 'react';\nimport Main from './Main';\nimport Web3 from 'web3';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends Component {\n  async componentWillMount() {\n    await this.loadWeb3();\n    await this.loadBlockchainData();\n  }\n\n  async loadBlockchainData() {\n    const web3 = window.web3;\n    const contract_abi = [{\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": true,\n        \"internalType\": \"address\",\n        \"name\": \"sender\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"Received\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"bet\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"player\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"winAmount\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"randomResult\",\n        \"type\": \"uint256\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"time\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"Result\",\n      \"type\": \"event\"\n    }, {\n      \"anonymous\": false,\n      \"inputs\": [{\n        \"indexed\": false,\n        \"internalType\": \"address\",\n        \"name\": \"admin\",\n        \"type\": \"address\"\n      }, {\n        \"indexed\": false,\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"Withdraw\",\n      \"type\": \"event\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"bet\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"game\",\n      \"outputs\": [{\n        \"internalType\": \"bool\",\n        \"name\": \"\",\n        \"type\": \"bool\"\n      }],\n      \"stateMutability\": \"payable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"bytes32\",\n        \"name\": \"requestId\",\n        \"type\": \"bytes32\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"randomness\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"rawFulfillRandomness\",\n      \"outputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"function\"\n    }, {\n      \"stateMutability\": \"payable\",\n      \"type\": \"receive\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"random\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"verdict\",\n      \"outputs\": [],\n      \"stateMutability\": \"payable\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"stateMutability\": \"nonpayable\",\n      \"type\": \"constructor\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"admin\",\n      \"outputs\": [{\n        \"internalType\": \"address payable\",\n        \"name\": \"\",\n        \"type\": \"address\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"gameId\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"name\": \"games\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"id\",\n        \"type\": \"uint256\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"bet\",\n        \"type\": \"uint256\"\n      }, {\n        \"internalType\": \"uint256\",\n        \"name\": \"amount\",\n        \"type\": \"uint256\"\n      }, {\n        \"internalType\": \"address payable\",\n        \"name\": \"player\",\n        \"type\": \"address\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"lastGameId\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }, {\n      \"inputs\": [],\n      \"name\": \"randomResult\",\n      \"outputs\": [{\n        \"internalType\": \"uint256\",\n        \"name\": \"\",\n        \"type\": \"uint256\"\n      }],\n      \"stateMutability\": \"view\",\n      \"type\": \"function\"\n    }];\n    const contract_address = '0x7126F3A25Ea71e2b5819491CB7f47B1AB25310B1'; //rinkeby\n\n    const contract = new web3.eth.Contract(contract_abi, contract_address);\n    this.setState({\n      contract: contract\n    });\n    const accounts = await web3.eth.getAccounts();\n    this.setState({\n      account: accounts[0]\n    });\n    const balance = await web3.eth.getBalance(this.state.account);\n    this.setState({\n      balance: balance\n    });\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum);\n      await window.ethereum.enable();\n    } else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider);\n    } else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!');\n    }\n  }\n\n  makeBet(bet, amount) {\n    this.state.contract.methods.game(bet).send({\n      from: this.state.account,\n      value: amount\n    }).on('transactionHash', hash => {\n      this.state.contract.events.Result({}, (error, event) => {\n        const verdict = event.returnValues.winAmount;\n\n        if (verdict === '0') {\n          window.alert('lose :(');\n        } else {\n          window.alert('WIN!');\n        }\n\n        window.location.reload();\n      });\n    }).on('error', error => {\n      window.alert('Error');\n    });\n  }\n\n  onChange(value) {\n    this.setState({\n      'amount': value\n    });\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: null,\n      amount: null,\n      balance: null,\n      contract: null,\n      event: null\n    };\n    this.makeBet = this.makeBet.bind(this);\n    this.setState = this.setState.bind(this);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Main, {\n        amount: this.state.amount,\n        balance: this.state.balance,\n        makeBet: this.makeBet,\n        onChange: this.onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/maxmohammadi/Lottery-Solidity/my-app/src/App.js"],"names":["React","Component","Main","Web3","App","componentWillMount","loadWeb3","loadBlockchainData","web3","window","contract_abi","contract_address","contract","eth","Contract","setState","accounts","getAccounts","account","balance","getBalance","state","ethereum","enable","currentProvider","alert","makeBet","bet","amount","methods","game","send","from","value","on","hash","events","Result","error","event","verdict","returnValues","winAmount","location","reload","onChange","constructor","props","bind","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Main from './Main'\nimport Web3 from 'web3'\nimport './App.css';\n\nclass App extends Component {\n  \n  async componentWillMount() {\n    await this.loadWeb3()\n    await this.loadBlockchainData()\n  }\n\n  async loadBlockchainData() {\n    const web3 = window.web3\n  \n    const contract_abi = [\n      {\n        \"anonymous\": false,\n        \"inputs\": [\n          {\n            \"indexed\": true,\n            \"internalType\": \"address\",\n            \"name\": \"sender\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"amount\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"Received\",\n        \"type\": \"event\"\n      },\n      {\n        \"anonymous\": false,\n        \"inputs\": [\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"id\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"bet\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"amount\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"address\",\n            \"name\": \"player\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"winAmount\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"randomResult\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"time\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"Result\",\n        \"type\": \"event\"\n      },\n      {\n        \"anonymous\": false,\n        \"inputs\": [\n          {\n            \"indexed\": false,\n            \"internalType\": \"address\",\n            \"name\": \"admin\",\n            \"type\": \"address\"\n          },\n          {\n            \"indexed\": false,\n            \"internalType\": \"uint256\",\n            \"name\": \"amount\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"Withdraw\",\n        \"type\": \"event\"\n      },\n      {\n        \"inputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"bet\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"game\",\n        \"outputs\": [\n          {\n            \"internalType\": \"bool\",\n            \"name\": \"\",\n            \"type\": \"bool\"\n          }\n        ],\n        \"stateMutability\": \"payable\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [\n          {\n            \"internalType\": \"bytes32\",\n            \"name\": \"requestId\",\n            \"type\": \"bytes32\"\n          },\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"randomness\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"rawFulfillRandomness\",\n        \"outputs\": [],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"function\"\n      },\n      {\n        \"stateMutability\": \"payable\",\n        \"type\": \"receive\"\n      },\n      {\n        \"inputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"random\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"verdict\",\n        \"outputs\": [],\n        \"stateMutability\": \"payable\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [],\n        \"stateMutability\": \"nonpayable\",\n        \"type\": \"constructor\"\n      },\n      {\n        \"inputs\": [],\n        \"name\": \"admin\",\n        \"outputs\": [\n          {\n            \"internalType\": \"address payable\",\n            \"name\": \"\",\n            \"type\": \"address\"\n          }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [],\n        \"name\": \"gameId\",\n        \"outputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"name\": \"games\",\n        \"outputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"id\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"bet\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"amount\",\n            \"type\": \"uint256\"\n          },\n          {\n            \"internalType\": \"address payable\",\n            \"name\": \"player\",\n            \"type\": \"address\"\n          }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [],\n        \"name\": \"lastGameId\",\n        \"outputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      },\n      {\n        \"inputs\": [],\n        \"name\": \"randomResult\",\n        \"outputs\": [\n          {\n            \"internalType\": \"uint256\",\n            \"name\": \"\",\n            \"type\": \"uint256\"\n          }\n        ],\n        \"stateMutability\": \"view\",\n        \"type\": \"function\"\n      }\n    ]\n    const contract_address = '0x7126F3A25Ea71e2b5819491CB7f47B1AB25310B1' //rinkeby\n    \n    const contract = new web3.eth.Contract(contract_abi, contract_address);\n    this.setState({ contract: contract })\n\n    const accounts = await web3.eth.getAccounts()\n    this.setState({ account: accounts[0] })\n\n    const balance = await web3.eth.getBalance(this.state.account)\n    this.setState({ balance: balance })\n  }\n\n  async loadWeb3() {\n    if (window.ethereum) {\n      window.web3 = new Web3(window.ethereum)\n      await window.ethereum.enable()\n    }\n    else if (window.web3) {\n      window.web3 = new Web3(window.web3.currentProvider)\n    }\n    else {\n      window.alert('Non-Ethereum browser detected. You should consider trying MetaMask!')\n    }\n  }\n\n  makeBet(bet, amount) {\n    this.state.contract.methods.game(bet).send({from: this.state.account, value: amount}).on('transactionHash', (hash) => {\n      this.state.contract.events.Result({}, (error, event) => {\n        const verdict = event.returnValues.winAmount\n        if(verdict === '0') {\n          window.alert('lose :(')\n        } else {\n          window.alert('WIN!')\n        }\n        window.location.reload();\n      })\n    }).on('error', (error) => {\n      window.alert('Error')\n    })\n  }\n\n  onChange(value) {\n    this.setState({'amount': value});\n  }\n\n  constructor(props) {\n    super(props)\n    this.state = {\n      account: null,\n      amount: null,\n      balance: null,\n      contract: null,\n      event: null,\n    }\n\n    this.makeBet = this.makeBet.bind(this)\n    this.setState = this.setState.bind(this)\n    this.onChange = this.onChange.bind(this)\n  }\n\n  render() {\n    return (\n      <div>\n            <Main\n              amount={this.state.amount}\n              balance={this.state.balance}\n              makeBet={this.makeBet}\n              onChange={this.onChange}\n            />\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}